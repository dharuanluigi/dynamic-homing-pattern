{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"b959668f-064f-461a-b825-51e15c5c786f","type":"text/plain","content":"User input"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"5f9f1996-e84d-41f0-a0f1-136dc007d530","$connId":"con_3","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-7db20631-2e8e-46f5-a11f-f94e9a0172f9","label":"UserInput","background":"#000000","canChangeBackground":false}],"id":"onboarding","root":true,"$title":"Start","$position":{"top":"83.3333px","left":"2264px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"b596d963-5876-480a-b92a-7f7179cb3888","type":"text/plain","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"cfcc9b24-83f0-41e9-83aa-77a99d7606fd","$connId":"con_8","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$title":"Exceptions","$position":{"top":"116.714px","left":"4068.71px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"action":{"$id":"a25fdb6e-28b8-4340-8c9f-00388b344927","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"4da6fbbb-a58a-49aa-bd8b-23978fc45902","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! Eu sou apenas um sample para te ajudar a entender na prática como funciona o <b>Dynamic Homing Pattern.</b>","metadata":{}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! Eu sou apenas um sample para te ajudar a entender na prática como funciona o <b>Dynamic Homing Pattern.</b>"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"63f162fd-9f39-4714-9a53-bde72b6fba1e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"23ae9cb9-3569-400e-bc1e-f2dbd6e10a63","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"23ae9cb9-3569-400e-bc1e-f2dbd6e10a63","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"61ff187a-65be-4a31-ad55-39ed35964964","$typeOfContent":"text","type":"SendMessage","settings":{"id":"1c8832f2-8dcf-4e56-99b2-f69554ccf4a0","type":"text/plain","content":"Skill atual: <b>{{application.identifier}}</b>","metadata":{}},"$cardContent":{"document":{"id":"1c8832f2-8dcf-4e56-99b2-f69554ccf4a0","type":"text/plain","content":"Skill atual: <b>{{application.identifier}}</b>"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"608e0da0-0e83-4513-b61b-d7134df25e61","type":"text/plain","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"a8844ef4-1669-4edf-9ecc-e90de16630ed","typeOfStateId":"state","$connId":"con_13","$id":"0966e09f-2f87-4e04-a179-7ee2a83ca501","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-09532bee-cfd7-4bfd-b345-3a0de37e5f6a","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"welcome","$title":"Welcome","$position":{"top":"252px","left":"2264px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"311f91e5-c9fa-42f1-9d39-fcd6a66e609c","type":"text/plain","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"63987d8e-b5b8-4849-bad4-03f7f3819cd3","typeOfStateId":"state","$connId":"con_18","$id":"0eabcdbf-8de2-4c83-b861-5e504c2aa5a9","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"6ab14e67-9b08-4a52-9544-aa2a2bd82200","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"objRedirectFromMain\"","$invalid":false,"settings":{"function":"run","source":"function run(objLastBlockBeforeUserInput, mainFlowId, objGotoExternalService) {\n    try {\n        objLastBlockBeforeUserInput = JSON.parse(objLastBlockBeforeUserInput);\n        objGotoExternalService = JSON.parse(objGotoExternalService);\n\n        const originService = new ObjServiceModel(mainFlowId, \"main\", objLastBlockBeforeUserInput);\n        const destinationService = new ObjServiceModel(null, objGotoExternalService.name, new BlockModel(null, objGotoExternalService.subService));\n\n        return new ObjRedirectServiceModel(originService, destinationService);\n    }\n    catch(err) {\n        return err.message;\n    }\n}\n\nfunction ObjRedirectServiceModel(objServiceModelOrigin, objServiceModelDestination) {\n    this.origin = objServiceModelOrigin;\n    this.destination = objServiceModelDestination;\n}\n\nfunction ObjServiceModel(guidId, strName, objBlock) {\n    this.id = guidId;\n    this.name = strName;\n    this.block = objBlock;\n}\n\nfunction BlockModel(id, name) {\n    this.id = id;\n    this.name = name;\n}","inputVariables":["objLastBlockBeforeUserInput","config.mainFlowId","objGotoExternalService"],"outputVariable":"objRedirectFromMain","LocalTimeZoneEnabled":false},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"63987d8e-b5b8-4849-bad4-03f7f3819cd3","$invalid":false,"typeOfStateId":"state"},"$tags":[{"id":"blip-tag-c6c9c7eb-0330-4e39-8e6c-86bf266c6c21","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false}],"id":"error","$title":"Default error","$position":{"top":"248px","left":"4069px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"a8844ef4-1669-4edf-9ecc-e90de16630ed":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"b6831a0a-e5d8-44e1-a9cd-2fea22b48cb0","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"0598230d-c86a-41a5-be58-d683f47e9521","typeOfStateId":"state","$connId":"con_23","$id":"0c5e519e-9e67-441a-adb3-da4c82676de9","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"a8844ef4-1669-4edf-9ecc-e90de16630ed","root":false,"$title":"1.0.0 - (Menu) principal","$position":{"top":"412px","left":"2264px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"757cf5d3-5918-431f-9a21-b67d645a54b4":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"285d03a3-06cf-455e-b854-44eb012f5751","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"fbafa3ab-5a00-403b-939d-b2a4b82ea7d6","typeOfStateId":"state","$connId":"con_28","$id":"c87002fb-cb5c-4977-9dc7-05024a1a6875","conditions":[{"source":"context","comparison":"equals","values":["exemplo 1"],"variable":"strSubjectChosen"}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"757cf5d3-5918-431f-9a21-b67d645a54b4","root":false,"$title":"[Go To] - Jump para escolha do assunto","$position":{"top":"766.222px","left":"2264.22px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fbafa3ab-5a00-403b-939d-b2a4b82ea7d6":{"$contentActions":[{"action":{"$id":"93774b65-2497-4e03-9daf-a6d036b52b4f","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"a884c8e4-2acd-4672-a803-e26d44c51a63","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"a884c8e4-2acd-4672-a803-e26d44c51a63","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"e9fd04ab-9c53-4519-9ef9-8ce84365ade5","$typeOfContent":"text","type":"SendMessage","settings":{"id":"ee23c402-4505-43bc-99da-2c75a1edad32","type":"text/plain","content":"<b>Esse aqui é o exemplo 1, que usa o direcionamento O.D.R.</b>","metadata":{}},"$cardContent":{"document":{"id":"ee23c402-4505-43bc-99da-2c75a1edad32","type":"text/plain","content":"<b>Esse aqui é o exemplo 1, que usa o direcionamento O.D.R.</b>"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"74b85bd9-c6ba-4347-8e67-1ea972e6a128","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"c924a96f-0749-4a2a-a310-0fb3e968e80c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"c924a96f-0749-4a2a-a310-0fb3e968e80c","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"de5b2665-faca-4bcf-a4b1-edc5e9b1a764","$typeOfContent":"text","type":"SendMessage","settings":{"id":"21cd955f-ab2a-4ca2-8a04-bd1f090dfb8e","type":"text/plain","content":" No menu abaixo, basta digitar qualquer coisa que não esteja no menu e acompanhar todo o processo de direcionamento do tipo <b>O.D.R</b> acontecendo.","metadata":{}},"$cardContent":{"document":{"id":"21cd955f-ab2a-4ca2-8a04-bd1f090dfb8e","type":"text/plain","content":" No menu abaixo, basta digitar qualquer coisa que não esteja no menu e acompanhar todo o processo de direcionamento do tipo <b>O.D.R</b> acontecendo."},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"02f26f00-22ee-4ac5-a435-086b94b8ae90","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"57ebee38-c296-4ba0-b555-5c32f1824f2b","typeOfStateId":"state","$connId":"con_33","$id":"ea209908-6a5d-4a4b-81b7-1334ffd49a68","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-b57abf40-9df6-402b-947f-36232ab561bf","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"fbafa3ab-5a00-403b-939d-b2a4b82ea7d6","root":false,"$title":"2.0.0 - Exemplo 1 : Direcionamento O.D.R","$position":{"top":"1034.22px","left":"1772.44px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"0598230d-c86a-41a5-be58-d683f47e9521":{"$contentActions":[{"action":{"$id":"53ec8dd5-e8d2-4de3-9b96-a3b4e52b9ac4","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"ccad58ba-f1bb-47c7-885d-28cfd34943f4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"ccad58ba-f1bb-47c7-885d-28cfd34943f4","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"126154d9-7e0c-4c25-a603-7c67c70b08f6","$typeOfContent":"select","type":"SendMessage","settings":{"id":"30fe0ca0-bbbc-43fb-8789-6316030200d5","type":"application/vnd.lime.select+json","content":{"text":"Para entender os exemplo que foram explicados no artigo, ou na documentação. Basta escolher um deles abaixo.\n\n<i>Atualmente, contém apenas um. Mas ao decorrer dos próximos dias, o restante dos exemplos irão aparecer também.</i>","options":[{"text":"Exemplo 1 (O.D.R)","previewText":"Exemplo 1 (O.D.R)","value":null,"index":0,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"30fe0ca0-bbbc-43fb-8789-6316030200d5","type":"application/vnd.lime.select+json","content":{"text":"Para entender os exemplo que foram explicados no artigo, ou na documentação. Basta escolher um deles abaixo.\n\n<i>Atualmente, contém apenas um. Mas ao decorrer dos próximos dias, o restante dos exemplos irão aparecer também.</i>","options":[{"text":"Exemplo 1 (O.D.R)","previewText":"Exemplo 1 (O.D.R)","value":null,"index":0,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"c3e32185-da1f-45a0-bd5e-013e62785fdf","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"757cf5d3-5918-431f-9a21-b67d645a54b4","typeOfStateId":"state","$connId":"con_38","$id":"e539c79f-e377-4241-b364-d81ac7702993","conditions":[{"source":"context","comparison":"notEquals","values":["input inesperado"],"variable":"strSubjectChosen"}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"eed39487-5dc9-4f6d-a43e-428c42d64950","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"subjectChosen\"","$invalid":false,"settings":{"function":"run","source":"function run(inputContent) {\n    const subjectChoosen = inputContent.toLowerCase();\n\n    switch(subjectChoosen) {\n        case \"exemplo 1 (o.d.r)\":\n            return \"exemplo 1\";\n        case \"exemplo 2\":\n            return \"exemplo 2\";\n        default:\n            return \"input inesperado\";\n    }\n}","inputVariables":["input.content"],"outputVariable":"strSubjectChosen","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"627ef045-6a38-44f3-b93c-bc9abc5399b2","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"objGotoExternalService\"","$invalid":false,"settings":{"function":"run","source":"function run() {\n    return new gotoExternalServiceModel(\"errors\", \"menu\");\n}\n\nfunction gotoExternalServiceModel(strName, strSubService) {\n    this.name = strName;\n    this.subService = strSubService;\n}","inputVariables":[],"outputVariable":"objGotoExternalService","LocalTimeZoneEnabled":false},"conditions":[{"source":"context","comparison":"equals","variable":"strSubjectChosen","values":["input inesperado"]}]}],"$inputSuggestions":["Exemplo 1 (O.D.R)"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-5f41507a-cb0d-47c0-9169-078c960d0272","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false},{"id":"blip-tag-5d122192-52f6-4e13-9c3b-483a54c4c6d7","label":"SendMessage","background":"#EE82EE","canChangeBackground":false},{"id":"blip-tag-a64d88b2-e2b7-4111-a35b-beba94a10a08","label":"UserInput","background":"#000000","canChangeBackground":false}],"id":"0598230d-c86a-41a5-be58-d683f47e9521","root":false,"$title":"[Input] - 1.0.0 - Menu principal","$position":{"top":"584px","left":"2264px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"57ebee38-c296-4ba0-b555-5c32f1824f2b":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"7a274e9e-0699-4592-b06c-3e5d75cd9a57","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"4c0ae242-b6bb-4d05-9f86-37736ab372aa","typeOfStateId":"state","$connId":"con_43","$id":"dbedfa85-a584-4d41-aefa-455e0f9b1af9","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":["Um assunto legal","Outro assunto legal","Voltar"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"57ebee38-c296-4ba0-b555-5c32f1824f2b","root":false,"$title":"2.0.1 - (Menu) Direcionamento O.D.R","$position":{"top":"1204.22px","left":"1502px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"9928ca35-87b0-44d5-8f80-4e839389a127":{"$contentActions":[{"action":{"$id":"da1b1d0a-b2df-4645-ba9e-8afcb394817e","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"2fc3fa8d-477a-459d-817e-2d62493b9fc6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"2fc3fa8d-477a-459d-817e-2d62493b9fc6","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"8d840f71-c1b6-4f9e-b595-8ac9617efe7c","$typeOfContent":"text","type":"SendMessage","settings":{"id":"5db2e811-44b7-462e-a823-38860f4b7f32","type":"text/plain","content":"{{Café é a melhor bebida quente | Resolver problemas é maravilhoso | Tecnologia é sensacional}}","metadata":{"#message.spinText":"true"}},"$cardContent":{"document":{"id":"5db2e811-44b7-462e-a823-38860f4b7f32","type":"text/plain","content":"{{Café é a melhor bebida quente | Resolver problemas é maravilhoso | Tecnologia é sensacional}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"255e730b-70fb-46f8-a797-077c4de28474","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"57ebee38-c296-4ba0-b555-5c32f1824f2b","typeOfStateId":"state","$connId":"con_48","$id":"79d30aa2-eec5-445d-9ab0-0ad092100195","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-3e1f979c-9820-4340-8240-df80b931da22","label":"SendMessage","background":"#EE82EE","canChangeBackground":false}],"id":"9928ca35-87b0-44d5-8f80-4e839389a127","root":false,"$title":"2.0.2 - Resposta aleatória","$position":{"top":"1273px","left":"1168px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"4c0ae242-b6bb-4d05-9f86-37736ab372aa":{"$contentActions":[{"action":{"$id":"b094986b-cb0c-41d1-9aaf-b70a73cc6f89","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"4f3fa9ac-18c4-4cf1-b926-4e2255f4dabf","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"4f3fa9ac-18c4-4cf1-b926-4e2255f4dabf","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"83942dd5-347a-4e18-adda-a6bd0ce6cd4e","$typeOfContent":"select","type":"SendMessage","settings":{"id":"126700a0-9124-4945-b005-3f2685ec8150","type":"application/vnd.lime.select+json","content":{"text":"Qual assunto você deseja falar?\n\nOs assuntos são aleatórios, para testar o direiconamento abordado no exemplo o <b>O.D.R é necessário enviar um input aleatório, ou seja, um input inesperado.</b>\n\n<b>Obs: apenas a última escolha é valida para voltar para o menu anterior.</b>","options":[{"text":"Um assunto legal","previewText":"Um assunto legal","value":null,"index":0,"type":null},{"text":"Voltar","previewText":"Voltar","value":null,"index":1,"type":null}]},"metadata":{}},"$cardContent":{"document":{"id":"126700a0-9124-4945-b005-3f2685ec8150","type":"application/vnd.lime.select+json","content":{"text":"Qual assunto você deseja falar?\n\nOs assuntos são aleatórios, para testar o direiconamento abordado no exemplo o <b>O.D.R é necessário enviar um input aleatório, ou seja, um input inesperado.</b>\n\n<b>Obs: apenas a última escolha é valida para voltar para o menu anterior.</b>","options":[{"text":"Um assunto legal","previewText":"Um assunto legal","value":null,"index":0,"type":null},{"text":"Voltar","previewText":"Voltar","value":null,"index":1,"type":null}]}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"18df50f7-2e18-41a5-98da-b56760cf00dc","type":"text/plain","textContent":"User input","content":"User input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"9928ca35-87b0-44d5-8f80-4e839389a127","typeOfStateId":"state","$connId":"con_53","$id":"3798a15c-d3d9-46bb-a4a0-e8a2f809dee0","conditions":[{"source":"context","comparison":"notEquals","values":["input inesperado"],"variable":"strSubjectChosen"}],"$invalid":false},{"stateId":"9b4be8c8-be2f-4de0-a9e5-6a42b6c8560d","typeOfStateId":"state","$connId":"con_58","$id":"10bcbc55-a944-4449-a96c-a4c1b16c03a8","conditions":[{"source":"input","comparison":"equals","values":["Voltar"]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"2035cb63-ae95-4d4a-b223-4f6ca40c5642","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"strSubjectChosen\"","$invalid":false,"settings":{"function":"run","source":"function run(inputContent) {\n    const subjectChoosen = inputContent.toLowerCase();\n\n    switch(subjectChoosen) {\n        case \"um assunto legal\":\n            return \"um assunto legal\";\n        case \"outro assunto legal\":\n            return \"outro assunto legal\";\n        default:\n            return \"input inesperado\";\n    }\n}","inputVariables":["input.content"],"outputVariable":"strSubjectChosen","LocalTimeZoneEnabled":false},"conditions":[]},{"$id":"ca459c37-5734-4104-b7cb-27115c428da7","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"objGotoExternalService\"","$invalid":false,"settings":{"function":"run","source":"function run(strSubjectChosen) {\n    return getRightServiceToRedirectUser(strSubjectChosen);\n}\n\nfunction getRightServiceToRedirectUser(strSubjectChosen) {\n    switch(strSubjectChosen) {\n        case \"XPTO\":\n            return new gotoExternalServiceModel(\"XPTO\", \"XYZ\"); // fake service example\n        case \"ABC\":\n            return new gotoExternalServiceModel(\"YZT\", \"XWQ\"); // fake service example\n        default:\n            return new gotoExternalServiceModel(\"errors\", \"menu\");\n    }\n}\n\nfunction gotoExternalServiceModel(strName, strSubService) {\n    this.name = strName;\n    this.subService = strSubService;\n}","inputVariables":["strSubjectChosen"],"outputVariable":"objGotoExternalService","LocalTimeZoneEnabled":false},"conditions":[]}],"$inputSuggestions":["Um assunto legal","Voltar"],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[{"id":"blip-tag-7fb3a7fd-f3b2-49d0-9957-369126859692","label":"ExecuteScript","background":"#FF961E","canChangeBackground":false},{"id":"blip-tag-fb4efaea-eda3-4f61-97df-b360f445055e","label":"SendMessage","background":"#EE82EE","canChangeBackground":false},{"id":"blip-tag-1dfa0c37-776c-4d63-9ef8-1dd06de74ac6","label":"UserInput","background":"#000000","canChangeBackground":false}],"id":"4c0ae242-b6bb-4d05-9f86-37736ab372aa","root":false,"$title":"[Input] 2.0.1 - Menu diracionamento O.D.R","$position":{"top":"1340px","left":"1502px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"63987d8e-b5b8-4849-bad4-03f7f3819cd3":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"e085d0eb-ded1-4578-8fb1-581e0d4af5a3","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[{"$id":"df13581e-4eb2-468c-bb54-8796d35e4edf","$typeOfContent":"","type":"Redirect","$title":"Dynamic redirect service","$invalid":false,"settings":{"context":{"type":"text/plain","value":"{{objRedirectFromMain}}"},"address":"{{objRedirectFromMain@destination.name}}"},"conditions":[]}],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false,"typeOfStateId":"state"},"$tags":[{"id":"blip-tag-1fdb3b58-4823-41e4-a9b9-ce7bea71eda7","label":"Redirect","background":"#1EA1FF","canChangeBackground":false}],"id":"63987d8e-b5b8-4849-bad4-03f7f3819cd3","root":false,"$title":"Redirecionamento (O.D.R)","$position":{"top":"395px","left":"4069px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"9b4be8c8-be2f-4de0-a9e5-6a42b6c8560d":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"d28cead7-74e7-46ca-8dcd-5fbbeaeefbb8","type":"text/plain","textContent":"User input","content":"User Input"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"a8844ef4-1669-4edf-9ecc-e90de16630ed","$invalid":false,"typeOfStateId":"state"},"$tags":[],"id":"9b4be8c8-be2f-4de0-a9e5-6a42b6c8560d","root":false,"$title":"[Nav] Voltar - Menu inicial","$position":{"top":"1510px","left":"1502px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"7f549158-f4b4-43c3-a437-80a081105c43","$typeOfContent":"","type":"ExecuteScript","$title":"Process \"objLastBlockBeforeUserInput\"","$invalid":false,"settings":{"function":"run","source":"function run(previousBlockId, previousBlockName) {\n    return new BlockModel(previousBlockId, previousBlockName);\n}\n\nfunction BlockModel(id, name) {\n    this.id = id;\n    this.name = name;\n}","inputVariables":["state.previous.id","state.previous.name"],"outputVariable":"objLastBlockBeforeUserInput"},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}}